- name: bug fix for libselinux-python error when copying files
  yum:
    name: libselinux-python
    state: latest
- name: copy nginx repo into yum config
  copy:
    src: yum_repos/nginx.repo
    dest: /etc/yum.repos.d/nginx.repo
- name: install nginx
  yum:
    name: nginx
    state: latest
- name: create sites-enabled directory
  file:
    path: /etc/nginx/sites-enabled
    state: directory
- name: create sites-available directory
  file:
    path: /etc/nginx/sites-available
    state: directory
- name: create ssl folder in nginx
  file:
    path: /etc/nginx/ssl
    state: directory
- name: Create tmp/pid folder for windows hosts
  file:
    path: /tmp/pid
    state: directory

- name: turn off selinux to prevent nginx permission error
  lineinfile:
    dest: /etc/sysconfig/selinux
    regexp: ^SELINUX=enforcing
    line: SELINUX=permissive
